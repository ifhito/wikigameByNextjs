# コードベース構造

## 概要
このドキュメントでは、wikigameWithNextプロジェクトのコードベース構造と各ファイルの役割について説明します。

## ディレクトリ構造

### 1. メインファイル
- `server.js`: WebSocketサーバーの実装とゲームロジックの中核
  - 部屋管理
  - プレイヤー管理
  - ゲーム状態管理
  - WebSocket通信処理

- `app/page.tsx`: アプリケーションのメインページ
  - 部屋作成/参加画面
  - ゲームモード選択
  - プレイヤー名入力

### 2. コンポーネント (`app/components/`)
- `GameRoom.tsx`: マルチプレイヤーゲームルーム
  - ゲームボードの表示
  - プレイヤー間のインタラクション
  - ゲーム状態の表示

- `PlayerList.tsx`: プレイヤー一覧
  - プレイヤー情報の表示
  - 準備状態の管理
  - ゴールページの表示

- `WikiSoloPage.tsx`: 一人用モード
  - ソロゲームの実装
  - ターン制限の管理
  - 勝敗判定

- `WikipediaPage.tsx`: Wikipediaページ表示
  - ページ内容のレンダリング
  - リンクの抽出と表示
  - クリック制御

- `Spinner.tsx`: ローディング表示
  - ローディングアニメーション
  - 状態表示

### 3. コンテキスト (`app/contexts/`)
- `SocketContext.tsx`: WebSocket接続管理
  - 接続状態の管理
  - イベントハンドラの登録
  - ゲーム状態の共有

### 4. ユーティリティ (`app/utils/`)
- `goal-detector.ts`: ゴール判定ロジック
  - ゴール条件の判定
  - ページタイトルの正規化
  - マッチング処理

### 5. 設定ファイル
- `next.config.ts`: Next.js設定
  - ビルド設定
  - プラグイン設定

- `tailwind.config.mjs`: Tailwind CSS設定
  - スタイル設定
  - カスタム設定

- `jest.config.js`: テスト設定
  - テスト環境設定
  - カバレッジ設定

- `tsconfig.json`: TypeScript設定
  - コンパイル設定
  - 型チェック設定

### 6. 環境設定
- `.env.local`: 開発環境変数
  - 開発用設定
  - ローカル接続設定

- `.env.production`: 本番環境変数
  - 本番用設定
  - セキュリティ設定

### 7. テスト関連
- `__tests__/`: テストファイル
  - コンポーネントテスト
  - ユーティリティテスト
  - ロジックテスト

- `jest.setup.js`: Jest設定
  - テスト環境セットアップ
  - モック設定

- `coverage/`: カバレッジレポート
  - テストカバレッジ情報
  - レポート生成

### 8. 静的ファイル
- `public/`: 静的アセット
  - 画像
  - アイコン
  - その他静的ファイル

- `app/globals.css`: グローバルスタイル
  - 共通スタイル
  - リセットCSS
  - カスタム変数

## 技術スタック
- フロントエンド: Next.js, React, TypeScript
- スタイリング: Tailwind CSS
- リアルタイム通信: WebSocket
- テスト: Jest
- ビルドツール: Next.js
- 型チェック: TypeScript

## アーキテクチャの特徴
- コンポーネントベースの設計
- リアルタイム通信の実装
- 型安全性の確保
- テスト環境の整備
- モジュール化された構造 